<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Edit</title>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css"
    />
    <link
      href="https://netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css"
      rel="stylesheet"
    />
    <link
      href="https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
    />

    <link rel="stylesheet" type="text/css" href="static/css/custom.css" />
    <link rel="stylesheet" type="text/css" href="static/css/responsive.css" />
  </head>
  <body class="body">
    <div class="wrapper">
      <!-- header section-->
      <div class="mobile-container">
        <!-- Top Navigation Menu -->
        <div class="topnav">
          <a class="new_task"
            >My New Taskboard
            <div id="toggle">
              <div class="one"></div>
              <div class="two"></div>
              <div class="three"></div>
            </div>
          </a>
          <a
            href="#setting"
            class="setting"
            data-bs-toggle="modal"
            data-bs-target="#setting"
            >Settings</a
          >
          <div id="myLinks" class="mobile_tab">
            <a id="save-button" href="#" class="menu_box"
              ><p class="menu_text">Save</p></a
            >
            <a id="duplicate-button" href="#" class="menu_box"
              ><p class="menu_text">Duplicate</p></a
            >
            <a id="delete-button" href="#" class="menu_box"
              ><p class="menu_text">Delete</p></a
            >
            <a id="new-task-button" href="#" class="menu_box"
              ><p class="menu_text">New</p></a
            >
            <a id="close-button" href="#" class="menu_box"
              ><p class="menu_text">Close</p></a
            >
          </div>
        </div>
      </div>
      <!-- end header section-->

      <div class="main">
        <div class="container-fluid">
          <div class="row">
            <div class="col-lg-6">
              <h5 class="edit-title">Tile Settings</h5>
              <div class="row justify-content-center px_20">
                <div class="col-lg-5">
                  <div class="setting_row_box">
                    <div class="row align-items-center">
                      <div class="col-md-6">
                        <p class="setting_row_text">Columns</p>
                      </div>
                      <div class="col-md-6">
                        <div class="setting_row_count_box">
                          <input type="text" id="Columns" placeholder="10" />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5">
                  <div class="setting_row_box">
                    <div class="row align-items-center">
                      <div class="col-md-6">
                        <p class="setting_row_text">Rows</p>
                      </div>
                      <div class="col-md-6">
                        <div class="setting_row_count_box">
                          <input type="text" id="Rows" placeholder="10" />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5">
                  <div class="setting_row_box">
                    <div class="row align-items-center">
                      <div class="col-md-6">
                        <p class="setting_row_text">First Column</p>
                      </div>
                      <div class="col-md-6">
                        <div class="setting_row_count_box">
                          <input type="text" id="Column" placeholder="0" />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5">
                  <div class="setting_row_box">
                    <div class="row align-items-center">
                      <div class="col-md-6">
                        <p class="setting_row_text">First Row</p>
                      </div>
                      <div class="col-md-6">
                        <div class="setting_row_count_box">
                          <input type="text" id="Rows" placeholder="0" />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <h5 class="edit-title">Formatting</h5>
              <div class="row justify-content-center px_20">
                <div class="col-lg-5">
                  <div class="setting_row_box">
                    <div class="row align-items-center">
                      <div class="col-md-6">
                        <p class="setting_row_text">Font Size</p>
                      </div>
                      <div class="col-md-6">
                        <div class="setting_row_count_box">
                          <input type="text" id="Font_Size" placeholder="0px" />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5">
                  <div class="setting_row_box">
                    <div class="row align-items-center">
                      <div class="col-md-6">
                        <p class="setting_row_text">Font Color</p>
                      </div>
                      <div class="col-md-6">
                        <div class="setting_row_count_box">
                          <input
                            type="text"
                            id="Font_Color"
                            placeholder="Black"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5">
                  <div class="setting_row_box">
                    <div class="row align-items-center">
                      <div class="col-md-6">
                        <p class="setting_row_text">Background Color</p>
                      </div>
                      <div class="col-md-6">
                        <div class="setting_row_count_box">
                          <input type="text" id="bg" placeholder="Grey" />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5">
                  <div class="setting_row_box">
                    <div class="row align-items-center">
                      <div class="col-md-6">
                        <p class="setting_row_text">Font Family</p>
                      </div>
                      <div class="col-md-6">
                        <div class="setting_row_count_box">
                          <input
                            type="text"
                            id="Font_Family"
                            placeholder="Eras ITC"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <h5 class="edit-title">Linking</h5>
              <div class="row justify-content-center px_20">
                <div class="col-lg-5">
                  <div class="setting_row_box">
                    <div class="row align-items-center">
                      <div class="col-md-6">
                        <p class="setting_row_text">Master Taskboard</p>
                      </div>
                      <div class="col-md-6">
                        <div class="setting_row_count_box">
                          <select name="Master_Taskboard" id="Master_Taskboard">
                            <option value="Disabled">Disabled</option>
                            <option value="Enable">Enable</option>
                          </select>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5">
                  <div class="setting_row_box">
                    <div class="row align-items-center">
                      <div class="col-md-6">
                        <p class="setting_row_text">Online Source</p>
                      </div>
                      <div class="col-md-6">
                        <div class="setting_row_count_box">
                          <select name="Online_Source" id="Online_Source">
                            <option value="Disabled">Disabled</option>
                            <option value="Enable">Enable</option>
                          </select>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5">
                  <div class="setting_row_box">
                    <div class="row align-items-center">
                      <div class="col-md-6">
                        <p class="setting_row_text">Auto-Update</p>
                      </div>
                      <div class="col-md-6">
                        <div class="setting_row_count_box">
                          <select name="Auto-Update" id="Auto-Update">
                            <option value="Yes">Yes</option>
                            <option value="No">No</option>
                          </select>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5">
                  <div class="setting_row_box">
                    <div class="row align-items-center">
                      <div class="col-md-6">
                        <p class="setting_row_text">Update File</p>
                      </div>
                      <div class="col-md-6">
                        <div class="setting_row_count_box">
                          <input
                            type="text"
                            id="Update_File"
                            placeholder="None"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <h5 class="edit-title">Data Builder</h5>
              <div class="row justify-content-center px_20">
                <div class="col-lg-5">
                  <div class="setting_row_box">
                    <div class="row align-items-center">
                      <div class="col-md-6">
                        <p class="setting_row_text">Title Header</p>
                      </div>
                      <div class="col-md-6">
                        <div class="setting_row_count_box">
                          <input
                            type="text"
                            id="Title_Header"
                            placeholder="..."
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5">
                  <div class="setting_row_box">
                    <div class="row align-items-center">
                      <div class="col-md-6">
                        <p class="setting_row_text">Text-Wrapping</p>
                      </div>
                      <div class="col-md-6">
                        <div class="setting_row_count_box">
                          <select name="Text-Wrapping" id="Text-Wrapping">
                            <option value="Disabled">Disabled</option>
                            <option value="Enable">Enable</option>
                          </select>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5">
                  <div class="setting_row_box">
                    <div class="row align-items-center">
                      <div class="col-md-6">
                        <p class="setting_row_text">Sorting Header</p>
                      </div>
                      <div class="col-md-6">
                        <div class="setting_row_count_box">
                          <input
                            type="text"
                            id="Sorting_Header"
                            placeholder="..."
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5">
                  <div class="setting_row_box">
                    <div class="row align-items-center">
                      <div class="col-md-6">
                        <p class="setting_row_text">Sort By</p>
                      </div>
                      <div class="col-md-6">
                        <div class="setting_row_count_box">
                          <select name="Sort_By" id="Sort_By">
                            <option value="Alphabetical">Alphabetical</option>
                            <option value="Ascending">Ascending</option>
                            <option value="Desanding">Desanding</option>
                          </select>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-lg-6 edit_box">
              <textarea
                class="filter_editor_box"
                type="text"
                placeholder="Filter Editor"
              ></textarea>
            </div>
          </div>
        </div>
      </div>

      <!-- Modal -->
      <div id="setting" class="modal">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="close-popup">
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <h5 class="modal-title" id="exampleModalLabel">Settings</h5>
              <div class="row justify-content-center px_20">
                <div class="col-lg-5">
                  <div class="setting_row_box">
                    <div class="row align-items-center">
                      <div class="col-md-6 col-sm-6">
                        <p class="setting_row_text">Columns</p>
                      </div>
                      <div class="col-md-6 col-sm-6">
                        <div class="setting_row_count_box">
                          <input type="text" id="Columns" placeholder="10" />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5">
                  <div class="setting_row_box">
                    <div class="row align-items-center">
                      <div class="col-md-6 col-sm-6">
                        <p class="setting_row_text">Rows</p>
                      </div>
                      <div class="col-md-6 col-sm-6">
                        <div class="setting_row_count_box">
                          <input type="text" id="Rows" placeholder="10" />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5">
                  <div class="setting_row_box">
                    <div class="row align-items-center">
                      <div class="col-md-6 col-sm-6">
                        <p class="setting_row_text">Tile Height</p>
                      </div>
                      <div class="col-md-6 col-sm-6">
                        <div class="setting_row_count_box">
                          <input
                            type="text"
                            id="Tile_Height"
                            placeholder="0 px"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5">
                  <div class="setting_row_box">
                    <div class="row align-items-center">
                      <div class="col-md-6 col-sm-6">
                        <p class="setting_row_text">Tile Width</p>
                      </div>
                      <div class="col-md-6 col-sm-6">
                        <div class="setting_row_count_box">
                          <input
                            type="text"
                            id="Tile_Width"
                            placeholder="0 px"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5">
                  <div class="setting_row_box">
                    <div class="row align-items-center">
                      <div class="col-md-6 col-sm-6">
                        <p class="setting_row_text">Password</p>
                      </div>
                      <div class="col-md-6 col-sm-6">
                        <div class="setting_row_count_box">
                          <input
                            type="Password"
                            id="Password"
                            placeholder="*****"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5"></div>
              </div>

              <h5 class="modal-title" id="exampleModalLabel">
                Default Formatting
              </h5>
              <div class="row justify-content-center px_20">
                <div class="col-lg-5">
                  <div class="setting_row_box">
                    <div class="row align-items-center">
                      <div class="col-md-6 col-sm-6">
                        <p class="setting_row_text">Font Size</p>
                      </div>
                      <div class="col-md-6 col-sm-6">
                        <div class="setting_row_count_box">
                          <input
                            type="text"
                            id="Font_Size"
                            placeholder="0 px"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5">
                  <div class="setting_row_box">
                    <div class="row align-items-center">
                      <div class="col-md-6 col-sm-6">
                        <p class="setting_row_text">Font Color</p>
                      </div>
                      <div class="col-md-6 col-sm-6">
                        <div class="setting_row_count_box">
                          <input type="text" id="Color" placeholder="Black" />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5">
                  <div class="setting_row_box">
                    <div class="row align-items-center">
                      <div class="col-md-6 col-sm-6">
                        <p class="setting_row_text">Background Color</p>
                      </div>
                      <div class="col-md-6 col-sm-6">
                        <div class="setting_row_count_box">
                          <input type="text" id="BG" placeholder="Grey" />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-5">
                  <div class="setting_row_box">
                    <div class="row align-items-center">
                      <div class="col-md-6 col-sm-6">
                        <p class="setting_row_text">Font Family</p>
                      </div>
                      <div class="col-md-6 col-sm-6">
                        <div class="setting_row_count_box">
                          <input
                            type="text"
                            id="Font_Family"
                            placeholder="Eras ITC"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="px_50">
                <h5
                  class="modal-title modal-title_color"
                  id="exampleModalLabel"
                >
                  Hotkeys
                </h5>
                <div class="row justify-content-center px_20">
                  <div class="col-lg-5">
                    <div class="setting_row_box1">
                      <div class="row align-items-center">
                        <a href="#"
                          ><div class="col-md-12">
                            <p class="setting_row_text">Update | Ctrl+U</p>
                          </div></a
                        >
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-5">
                    <div class="setting_row_box1">
                      <div class="row align-items-center">
                        <a href="#"
                          ><div class="col-md-12">
                            <p class="setting_row_text">Rollback | Ctrl+Z</p>
                          </div></a
                        >
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-5">
                    <div class="setting_row_box1">
                      <div class="row align-items-center">
                        <a href="#"
                          ><div class="col-md-12">
                            <p class="setting_row_text">Reset | Ctrl+R</p>
                          </div></a
                        >
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-5">
                    <div class="setting_row_box1">
                      <div class="row align-items-center">
                        <a href="#"
                          ><div class="col-md-12">
                            <p class="setting_row_text">
                              Roll-forward | Ctrl+Y
                            </p>
                          </div></a
                        >
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-5">
                    <div class="setting_row_box1">
                      <div class="row align-items-center">
                        <a href="#"
                          ><div class="col-md-12">
                            <p class="setting_row_text">
                              Edit Taskboard | Ctrl+E
                            </p>
                          </div></a
                        >
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-5">
                    <div class="setting_row_box1">
                      <div class="row align-items-center">
                        <a href="#"
                          ><div class="col-md-12">
                            <p class="setting_row_text">
                              Open Taskboard | Ctrl+O
                            </p>
                          </div></a
                        >
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <button class="save_btn">Save</button>
            </div>
          </div>
        </div>
      </div>
      <!-- end-Modal -->
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <script
      src="https://code.jquery.com/jquery-2.2.0.min.js"
      type="text/javascript"
    ></script>
    <script>
      function myFunction() {
        var x = document.getElementById("myLinks");
        if (x.style.display === "block") {
          x.style.display = "none";
        } else {
          x.style.display = "block";
        }
      }
      document.addEventListener("DOMContentLoaded", function () {
        const urlParams = new URLSearchParams(window.location.search);
        const taskboardName = urlParams.get("name");

        // Check if a taskboard name is present
        if (taskboardName) {
          // Decode the taskboard name to handle spaces and special characters correctly
          const decodedTaskboardName = decodeURIComponent(taskboardName);

          // Set the taskboard name to the title in the navigation bar
          const titleElement = document.querySelector(".new_task");
          if (titleElement) {
            titleElement.textContent = decodedTaskboardName;
          }
        } else {
          // Optional: Handle the case where no taskboard name is present, or set a default title
          console.log("No taskboard specified. Default title is used.");
        }

        var menuLinks = document.getElementById("myLinks");
        menuLinks.style.display = "block";

        // Event listener for Delete button
        const deleteButton = document.getElementById("delete-button");
        if (deleteButton) {
          deleteButton.addEventListener("click", confirmDeletion);
        }

        // Event listener for Duplicate button
        const duplicateButton = document.getElementById("duplicate-button");
        if (duplicateButton) {
          duplicateButton.addEventListener("click", duplicateTaskboard);
        }

        // Event listener for Close button
        const closeButton = document.getElementById("close-button");
        if (closeButton) {
          closeButton.addEventListener("click", function () {
            window.location.href = "/";
          });
        }

        // Event listener for Save button
        const saveButton = document.getElementById("save-button");
        if (saveButton) {
          saveButton.addEventListener("click", function () {
            console.log("Save button clicked");
            // Implement save functionality here
          });
        }

        // Event listener for New Task button
        const newTaskButton = document.getElementById("new-task-button");
        if (newTaskButton) {
          newTaskButton.addEventListener("click", function () {
            console.log("New Task button clicked");
            // Implement new task functionality here
          });
        }
      });

      document
        .getElementById("taskboard-name-button")
        .addEventListener("click", function () {
          const urlParams = new URLSearchParams(window.location.search);
          const taskboardName = urlParams.get("name");
          if (taskboardName) {
            window.location.href = `/?name=${encodeURIComponent(
              taskboardName
            )}`;
          } else {
            alert("No taskboard specified.");
          }
        });

      document
        .getElementById("close-button")
        .addEventListener("click", function () {
          window.location.href = "/";
        });

      document
        .getElementById("settings-button")
        .addEventListener("click", function () {
          // To open in the same tab:
          window.location.href = "settings";
        });

      document.addEventListener("DOMContentLoaded", function () {
        const urlParams = new URLSearchParams(window.location.search);
        const taskboardName = urlParams.get("name");
        console.log("URL Parameters:", urlParams.toString());
        console.log("Taskboard Name:", taskboardName);

        if (!taskboardName) {
          alert("No taskboard specified for editing.");
        }
      });

      async function confirmDeletion() {
        if (confirm("Are you sure you want to delete this taskboard?")) {
          const urlParams = new URLSearchParams(window.location.search);
          const taskboardName = urlParams.get("name");
          console.log("Taskboard Name:", taskboardName);

          try {
            const response = await fetch(`/delete/?name=${taskboardName}`, {
              method: "DELETE",
            });
            if (response.ok) {
              console.log("Taskboard deleted successfully.");
              // Redirect to home or refresh
              // window.location.href = 'home.html';
              // location.reload();
            } else {
              console.error("Failed to delete taskboard.");
            }
          } catch (error) {
            console.error("Error:", error);
          }
        }
      }

      async function duplicateTaskboard() {
        const newTaskboardName = prompt(
          "Please enter a name for the new taskboard:"
        );
        if (!newTaskboardName) {
          alert("Taskboard duplication cancelled.");
          return;
        }

        const urlParams = new URLSearchParams(window.location.search);
        const currentTaskboardName = urlParams.get("name");

        try {
          const response = await fetch(
            `/duplicate?currentName=${encodeURIComponent(
              currentTaskboardName
            )}&newName=${encodeURIComponent(newTaskboardName)}`,
            { method: "POST" }
          );
          if (response.ok) {
            alert("Taskboard duplicated successfully.");
            // Optionally, redirect to the edit page of the new taskboard
            // window.location.href = `/edit?name=${encodeURIComponent(newTaskboardName)}`;
          } else {
            alert("Failed to duplicate taskboard.");
          }
        } catch (error) {
          console.error("Error:", error);
        }
      }

      async function fetchTaskboardData() {
        // Get the taskboard name from URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const currentTaskboardName = urlParams.get("name");

        // Check if a taskboard name is present
        if (currentTaskboardName) {
          // Redirect to the taskboard view page
          window.location.href = `/get/?name=${encodeURIComponent(
            currentTaskboardName
          )}`;
        } else {
          // Handle the case where no taskboard name is present
          alert("No taskboard specified.");
        }
      }
    </script>
  </body>
</html>
