<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Taskboard</title>
    <link rel="stylesheet" href="/static/styling/home.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Eras+ITC&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

    <style>
        body, html {
            height: 100%;
            margin: 0;
            font-family: Arial, sans-serif;
            background-color: #333;
            color: white;
            
        }
        
        header {
            background-color: #222;
            padding: 10px 20px;
            padding-left: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        nav {
            position: relative; /* Ensure nav is positioned for absolute positioning of children */
            padding-left: 0;
        }
        
        nav h1 {
            margin: 0;
            display: flex;
            align-items: center;
            background: #007bff; /* Set the background color to blue */
            position: relative; /* Ensure relative positioning for the nav h1 */
            padding: 5px;
            font-size: 16px;
            transform: skewX(-20deg);
            margin-left: -40px;
            padding-left: 50px;
            margin-right: 5px;
        }



        nav h1 span { 
            display: inline-block; /* Makes sure the transformation applies properly */
            transform: skewX(20deg); /* Opposite skew to the button's skew */
        
        }
        
        nav .hamburger {
            cursor: pointer;
            font-size: 24px;
            margin-left: 10px;
            color: white; /* Change the color of the hamburger icon to white for better visibility */
            padding-left: 150px;
            transform: skewX(0deg);
        }
        
        .menu {
            list-style: none;
            align-items: center;
            padding: 0;
            position: absolute;
            left: 100%; /* Position to the right of the nav h1 */
            transform: scaleX(0); /* Initially collapsed along the X axis */
            transform-origin: left;
            transition: transform 350ms ease-in-out; /* Animate the transform property */
            background-color: #222;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2); /* Optional: Add a shadow for better visibility */
        }
        
        .showNavMenu {
            transform: scaleX(1); /* Expand to full width */
        }
        
        ul li {
            display: block; /* Change to block for vertical list */
            padding: 5px;
            
            
        }
        
        .button-blue {
            background: #007bff; /* Assuming a solid blue; replace with gradient if needed */
            color: white;
            border: none;
            padding: 10px 15px;
            font-size: 16px;
            font-weight: bold;
            margin-left: -15px; /* Space between buttons */
            transition: background-color 0.3s ease; /* Smooth transition for hover effect */
            text-transform: uppercase; /* If the text should be uppercase as in the screenshot */
            transform: skewX(-20deg);
        }

        nav {
            display: flex;
            justify-content: space-between; /* Adjust this to align the nav items as in the screenshot */
            align-items: center;
            padding: 10px; /* Adjust as needed */
        }
        
        /* Style for the hamburger icon */
        nav .hamburger {
            cursor: pointer;
            font-size: 24px;
            color: white; /* Change the color of the hamburger icon to white for better visibility */
        }
        
        /* You might also want to style the <ul> element to have padding and margin 0 */
        nav ul {
            padding: 0;
            margin: 0;
            display: flex; /* To align the buttons horizontally */
        }
        
        /* Style for the <li> elements to remove list styles and margins */
        nav ul li {
            list-style: none;
            margin: 0;
        }

        ul li button.button-blue:hover {
            background-color: blue; /* Keep the background color blue on hover */
        }


        .button-blue:hover {
            background: linear-gradient(to bottom right, #0056b3, #004291);
            box-shadow: 0 2px #002b5e;
            transform: translateY(2px) skewX(-20deg); /* Add skew transformation here as well */
        }

        header {
            background-color: #222;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between; /* Aligns items on opposite ends */
            align-items: center;
        }
        
        .button-blue span {
            display: inline-block; /* Makes sure the transformation applies properly */
            transform: skewX(20deg); /* Opposite skew to the button's skew */
        }

        .eras { font-family: 'Eras ITC', sans-serif; }


        body {
            font-family: 'Eraser', sans-serif;
        }

        /* Adjust button style */
        .rounded-none {
            border-radius: 0;
        }

        /* Adjust skew for all divs */
        .skew-div {
            transform: skewX(-40deg);
        }

        /* Counteract skew for text */
        .skew-text {
            transform: skewX(40deg);
        }

        /* Adjust skew for text in input fields */
        input.skew-text {
            transform: skewX(0deg);
        }

        .main-container {
            display: flex; /* Enable Flexbox */
            flex-wrap: nowrap; /* Prevent wrapping of items */
            justify-content: space-between; /* Space out the child elements */
            align-items: stretch; /* Make children of container stretch to fill the container's height */
            width: 100%; /* Ensure the container takes full width */
        }
        
        
        .left-panel, .right-panel {
            flex: 1; /* Each panel takes up equal space */
            box-sizing: border-box; /* Include padding and border in the element's total width and height */
        }
        
        /* Additional styles to ensure no margin or padding is collapsing the layout */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%; /* Ensure the body takes full width of the viewport */
        }

        .right-container {
            width: 100%; /* Adjust this as needed, e.g., 50% if it's half of a split layout */
            /* Other styling for right-container */
        }
        
        .large-input {
            width: 100%; /* Full width of the container */
            height: 100px; /* Adjust the height as needed */
            padding: 10px; /* Inner spacing */
            margin: 0; /* No external margin */
            font-size: 1.2em; /* Larger text */
            background-color: #e0e0e0; /* Light grey background */
            border: 1px solid #ccc; /* Defined border */
            border-radius: 4px; /* Optional: rounded corners */
        }
        
        
        
        
    </style>
</head>
<body>
    <header>
        <nav>
            <h1>
                <span id="taskboard-name-button">My New Taskboard</span>
                <span class="hamburger">&#9776;</span>
            </h1>
            <ul class="menu">
                <li><button id="save-button" class="button-blue"><span>Save</span></button></li>
                <li><button id="duplicate-button" class="button-blue"><span>Duplicate</span></button></li>
                <li><button id="delete-button" class="button-blue"><span>Delete</span></button></li>
                <li><button id="new-task-button" class="button-blue"><span>New</span></button></li>
                <li><button id="close-button" class="button-blue"><span>Close</span></button></li>
            </ul>
        </nav>
        <button id="settings-button" class="button-blue"><span>Settings</span></button> <!-- Moved outside of the nav, into the header -->
    </header>
    



    <div class="flex items-stretch w-full h-screen">
        <div class="flex-1 p-6 overflow-auto"> <!-- Set flex-1 for equal width and overflow-auto for scroll -->
            <div class="text-center text-2xl font-bold my-4">Tile Settings</div>
            <div class="grid gap-2"> <!-- Reduce spacing between divs -->
                <!-- Settings Group 1 -->
                <div class="grid grid-cols-2 gap-2"> <!-- Reduce spacing between divs -->
                    <!-- Columns -->
                    <div class="flex justify-between items-center bg-blue-500 px-4 skew-div rounded-none" style="height: 30px;"> <!-- Add skew-div class -->
                        <div class="flex-1 flex items-center "> <!-- Adjusted to take up half width -->
                            <span class="skew-text text-black">Columns</span>
                        </div>
                        <input type="number" value="10" class="w-16 bg-blue-300 text-black rounded border border-gray-600 focus:border-blue-500 focus:ring focus:ring-blue-300 focus:ring-opacity-50 skew-text text-center" style="width:50%;" />
                    </div>
    
                    <!-- Rows -->
                    <div class="flex justify-between items-center bg-blue-500 px-4 skew-div rounded-none" style="height: 30px;"> <!-- Add skew-div class -->
                        <div class="flex-1 flex items-center"> <!-- Adjusted to take up half width -->
                            <span class="skew-text text-black">Rows</span>
                        </div>
                        <input type="number" value="10" class="w-16 bg-blue-300 text-black rounded border border-gray-600 focus:border-blue-500 focus:ring focus:ring-blue-300 focus:ring-opacity-50 skew-text text-center" style="width:50%;" />
                    </div>
                </div>
                <!-- Settings Group 2 -->
                <div class="grid grid-cols-2 gap-2"> <!-- Reduce spacing between divs -->
                    <!-- Tile Height -->
                    <div class="flex justify-between items-center bg-blue-500 px-4 skew-div rounded-none" style="height: 30px;"> <!-- Add skew-div class -->
                        <div class="flex-1 flex items-center"> <!-- Adjusted to take up half width -->
                            <span class="skew-text text-black">Tile Height</span>
                        </div>
                        <input type="number" value="10" class="w-16 bg-blue-300 text-black rounded border border-gray-600 focus:border-blue-500 focus:ring focus:ring-blue-300 focus:ring-opacity-50 skew-text text-center" style="width:50%;" />
                    </div>
                    <!-- Tile Width -->
                    <div class="flex justify-between items-center bg-blue-500 px-4 skew-div rounded-none" style="height: 30px;"> <!-- Add skew-div class -->
                        <div class="flex-1 flex items-center"> <!-- Adjusted to take up half width -->
                            <span class="skew-text text-black">Tile Width</span>
                        </div>
                        <input type="number" value="10" class="w-16 bg-blue-300 text-black rounded border border-gray-600 focus:border-blue-500 focus:ring focus:ring-blue-300 focus:ring-opacity-50 skew-text text-center" style="width:50%;" />
                    </div>
                </div>

                <!-- Default Formatting -->
                <div class="text-center text-2xl font-bold my-4">Formatting</div>
                <div class="grid grid-cols-2 gap-2"> <!-- Reduce spacing between divs -->
                    <!-- Font Size -->
                    <div class="flex justify-between items-center bg-blue-500 px-4 skew-div rounded-none" style="height: 30px;"> <!-- Add skew-div class -->
                        <div class="flex-1 flex items-center"> <!-- Adjusted to take up half width -->
                            <span class="skew-text text-black">Font Size</span>
                        </div>
                        <input type="number" value="10" class="w-16 bg-blue-300 text-black rounded border border-gray-600 focus:border-blue-500 focus:ring focus:ring-blue-300 focus:ring-opacity-50 skew-text text-center" style="width:50%;" />
                    </div>
                    <!-- Font Color -->
                    <div class="flex justify-between items-center bg-blue-500 px-4 skew-div rounded-none" style="height: 30px;"> <!-- Add skew-div class -->
                        <div class="flex-1 flex items-center"> <!-- Adjusted to take up half width -->
                            <span class="skew-text text-black">Font Color</span>
                        </div>
                        <input type="number" value="10" class="w-16 bg-blue-300 text-black rounded border border-gray-600 focus:border-blue-500 focus:ring focus:ring-blue-300 focus:ring-opacity-50 skew-text text-center" style="width:50%;" />
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-2"> <!-- Reduce spacing between divs -->
                    <!-- Background Color -->
                    <div class="flex justify-between items-center bg-blue-500 px-4 skew-div rounded-none" style="height: 30px;"> <!-- Add skew-div class -->
                        <div class="flex-1 flex items-center"> <!-- Adjusted to take up half width -->
                            <span class="skew-text text-black">Background Color</span>
                        </div>
                        <input type="number" value="10" class="w-16 bg-blue-300 text-black rounded border border-gray-600 focus:border-blue-500 focus:ring focus:ring-blue-300 focus:ring-opacity-50 skew-text text-center" style="width:50%;" />
                    </div>
                    <!-- Font Family -->
                    <div class="flex justify-between items-center bg-blue-500 px-4 skew-div rounded-none" style="height: 30px;"> <!-- Add skew-div class -->
                        <div class="flex-1 flex items-center"> <!-- Adjusted to take up half width -->
                            <span class="skew-text text-black">Font Family</span>
                        </div>
                        <input type="number" value="10" class="w-16 bg-blue-300 text-black rounded border border-gray-600 focus:border-blue-500 focus:ring focus:ring-blue-300 focus:ring-opacity-50 skew-text text-center" style="width:50%;" />
                    </div>
                </div>

                <!-- Default Formatting -->
                <div class="text-center text-2xl font-bold my-4">Linking</div>
                <div class="grid grid-cols-2 gap-2"> <!-- Reduce spacing between divs -->
                    <!-- Font Size -->
                    <div class="flex justify-between items-center bg-blue-500 px-4 skew-div rounded-none" style="height: 30px;"> <!-- Add skew-div class -->
                        <div class="flex-1 flex items-center"> <!-- Adjusted to take up half width -->
                            <span class="skew-text text-black">Font Size</span>
                        </div>
                        <input type="number" value="10" class="w-16 bg-blue-300 text-black rounded border border-gray-600 focus:border-blue-500 focus:ring focus:ring-blue-300 focus:ring-opacity-50 skew-text text-center" style="width:50%;" />
                    </div>
                    <!-- Font Color -->
                    <div class="flex justify-between items-center bg-blue-500 px-4 skew-div rounded-none" style="height: 30px;"> <!-- Add skew-div class -->
                        <div class="flex-1 flex items-center"> <!-- Adjusted to take up half width -->
                            <span class="skew-text text-black">Font Color</span>
                        </div>
                        <input type="number" value="10" class="w-16 bg-blue-300 text-black rounded border border-gray-600 focus:border-blue-500 focus:ring focus:ring-blue-300 focus:ring-opacity-50 skew-text text-center" style="width:50%;" />
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-2"> <!-- Reduce spacing between divs -->
                    <!-- Background Color -->
                    <div class="flex justify-between items-center bg-blue-500 px-4 skew-div rounded-none" style="height: 30px;"> <!-- Add skew-div class -->
                        <div class="flex-1 flex items-center"> <!-- Adjusted to take up half width -->
                            <span class="skew-text text-black">Background Color</span>
                        </div>
                        <input type="number" value="10" class="w-16 bg-blue-300 text-black rounded border border-gray-600 focus:border-blue-500 focus:ring focus:ring-blue-300 focus:ring-opacity-50 skew-text text-center" style="width:50%;" />
                    </div>
                    <!-- Font Family -->
                    <div class="flex justify-between items-center bg-blue-500 px-4 skew-div rounded-none" style="height: 30px;"> <!-- Add skew-div class -->
                        <div class="flex-1 flex items-center"> <!-- Adjusted to take up half width -->
                            <span class="skew-text text-black">Font Family</span>
                        </div>
                        <input type="number" value="10" class="w-16 bg-blue-300 text-black rounded border border-gray-600 focus:border-blue-500 focus:ring focus:ring-blue-300 focus:ring-opacity-50 skew-text text-center" style="width:50%;" />
                    </div>
                </div>

                <!-- Default Formatting -->
                <div class="text-center text-2xl font-bold my-4">Data Builder</div>
                <div class="grid grid-cols-2 gap-2"> <!-- Reduce spacing between divs -->
                    <!-- Font Size -->
                    <div class="flex justify-between items-center bg-blue-500 px-4 skew-div rounded-none" style="height: 30px;"> <!-- Add skew-div class -->
                        <div class="flex-1 flex items-center"> <!-- Adjusted to take up half width -->
                            <span class="skew-text text-black">Font Size</span>
                        </div>
                        <input type="number" value="10" class="w-16 bg-blue-300 text-black rounded border border-gray-600 focus:border-blue-500 focus:ring focus:ring-blue-300 focus:ring-opacity-50 skew-text text-center" style="width:50%;" />
                    </div>
                    <!-- Font Color -->
                    <div class="flex justify-between items-center bg-blue-500 px-4 skew-div rounded-none" style="height: 30px;"> <!-- Add skew-div class -->
                        <div class="flex-1 flex items-center"> <!-- Adjusted to take up half width -->
                            <span class="skew-text text-black">Font Color</span>
                        </div>
                        <input type="number" value="10" class="w-16 bg-blue-300 text-black rounded border border-gray-600 focus:border-blue-500 focus:ring focus:ring-blue-300 focus:ring-opacity-50 skew-text text-center" style="width:50%;" />
                    </div>

                    <div class="flex justify-between items-center bg-blue-500 px-4 skew-div rounded-none" style="height: 30px;"> <!-- Add skew-div class -->
                        <div class="flex-1 flex items-center"> <!-- Adjusted to take up half width -->
                            <span class="skew-text text-black">Font Size</span>
                        </div>
                        <input type="number" value="10" class="w-16 bg-blue-300 text-black rounded border border-gray-600 focus:border-blue-500 focus:ring focus:ring-blue-300 focus:ring-opacity-50 skew-text text-center" style="width:50%;" />
                    </div>
                    <!-- Font Color -->
                    <div class="flex justify-between items-center bg-blue-500 px-4 skew-div rounded-none" style="height: 30px;"> <!-- Add skew-div class -->
                        <div class="flex-1 flex items-center"> <!-- Adjusted to take up half width -->
                            <span class="skew-text text-black">Font Color</span>
                        </div>
                        <input type="number" value="10" class="w-16 bg-blue-300 text-black rounded border border-gray-600 focus:border-blue-500 focus:ring focus:ring-blue-300 focus:ring-opacity-50 skew-text text-center" style="width:50%;" />
                    </div>
                </div>
                
            </div>
        </div>
        <div class="flex-1 h-screen"> <!-- Set h-screen for full height -->
          <textarea class="w-full h-full p-6 bg-gray-700 custom-font text-white border-none outline-none" placeholder="Enter filter criteria"></textarea> <!-- Set h-full for full height and remove padding/margin -->
        </div>
      </div>

    <script>
        

        document.addEventListener('DOMContentLoaded', function() {
            // Toggle the menu
            const hamburger = document.querySelector('.hamburger');
            const menu = document.querySelector('.menu');
            hamburger.addEventListener('click', () => {
                menu.classList.toggle('showNavMenu');
            });
        
            // Event listener for Delete button
            const deleteButton = document.getElementById('delete-button');
            if (deleteButton) {
                deleteButton.addEventListener('click', confirmDeletion);
            }
        
            // Event listener for Duplicate button
            const duplicateButton = document.getElementById('duplicate-button');
            if (duplicateButton) {
                duplicateButton.addEventListener('click', duplicateTaskboard);
            }
        
            // Event listener for Close button
            const closeButton = document.getElementById('close-button');
            if (closeButton) {
                closeButton.addEventListener('click', function() {
                    window.location.href = '/';
                });
            }
        
            // Event listener for Save button
            const saveButton = document.getElementById('save-button');
            if (saveButton) {
                saveButton.addEventListener('click', function() {
                    console.log('Save button clicked');
                    // Implement save functionality here
                });
            }
        
            // Event listener for New Task button
            const newTaskButton = document.getElementById('new-task-button');
            if (newTaskButton) {
                newTaskButton.addEventListener('click', function() {
                    console.log('New Task button clicked');
                    // Implement new task functionality here
                });
            }
        });        

        document.getElementById('taskboard-name-button').addEventListener('click', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const taskboardName = urlParams.get('name');
            if (taskboardName) {
                window.location.href = `/?name=${encodeURIComponent(taskboardName)}`;
            } else {
                alert('No taskboard specified.');
            }
        });


        document.getElementById('close-button').addEventListener('click', function() {
            window.location.href = '/';
        });

        document.getElementById('settings-button').addEventListener('click', function() {
            // To open in the same tab:
            window.location.href = 'settings';

        });

        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const taskboardName = urlParams.get('name');
            console.log('URL Parameters:', urlParams.toString());
            console.log('Taskboard Name:', taskboardName);

            if (!taskboardName) {
                alert('No taskboard specified for editing.');
            }
        });

        async function confirmDeletion() {
            if (confirm("Are you sure you want to delete this taskboard?")) {
                const urlParams = new URLSearchParams(window.location.search);
                const taskboardName = urlParams.get('name');
                console.log('Taskboard Name:', taskboardName);

                try {
                    const response = await fetch(`/delete/?name=${taskboardName}`, { method: 'DELETE' });
                    if (response.ok) {
                        console.log('Taskboard deleted successfully.');
                        // Redirect to home or refresh
                        // window.location.href = 'home.html';
                        // location.reload();
                    } else {
                        console.error('Failed to delete taskboard.');
                    }
                } catch (error) {
                    console.error('Error:', error);
                }
            }
        }

        async function duplicateTaskboard() {
            const newTaskboardName = prompt('Please enter a name for the new taskboard:');
            if (!newTaskboardName) {
                alert('Taskboard duplication cancelled.');
                return;
            }

            const urlParams = new URLSearchParams(window.location.search);
            const currentTaskboardName = urlParams.get('name');

            try {
                const response = await fetch(`/duplicate?currentName=${encodeURIComponent(currentTaskboardName)}&newName=${encodeURIComponent(newTaskboardName)}`, { method: 'POST' });
                if (response.ok) {
                    alert('Taskboard duplicated successfully.');
                    // Optionally, redirect to the edit page of the new taskboard
                    // window.location.href = `/edit?name=${encodeURIComponent(newTaskboardName)}`;
                } else {
                    alert('Failed to duplicate taskboard.');
                }
            } catch (error) {
                console.error('Error:', error);
            }
        }

        async function fetchTaskboardData() {
            // Get the taskboard name from URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            const currentTaskboardName = urlParams.get('name');
        
            // Check if a taskboard name is present
            if (currentTaskboardName) {
                // Redirect to the taskboard view page
                window.location.href = `/get/?name=${encodeURIComponent(currentTaskboardName)}`;
            } else {
                // Handle the case where no taskboard name is present
                alert('No taskboard specified.');
            }
        }
        
    </script>
</body>
</html>
